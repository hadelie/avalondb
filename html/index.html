<!doctype html>
<html>

<head>
<meta charset="utf-8" />
<title>AVALON DB</title>

<link rel="stylesheet" href="/static/style/main.css" />
</head>

<body>

<p>
<h2>AVALON 보드게임 검색 :D</h2>
</p>

<p>
게임 이름: <input type="text" id="txt_search_by_name" />&nbsp;<button id="btn_search_by_name">검색</button><br>
<br>
게임 장르: 
<select id="opt_search_by_genre">
  <option value='none' style='display:none;'></option>
  <option value='all'>All</option>
</select>
</p>

<p>
<table id="list_boardgame" cellpadding="4" cellspacing="0">
  <thead>
    <tr></tr>
  </thead>

  <tbody>
  </tbody>
</table>
</p>



<script type='text/javascript' src="/socket.io/socket.io.js"></script>
<script type='text/javascript' src="//code.jquery.com/jquery-latest.min.js"></script>

<script type='text/javascript' src="/static/script/avGenre.js"></script>
<script type='text/javascript' src="/static/script/avList.js"></script>

<script type='text/javascript'>

/* Initialize List */
avList.initList();

/* Socket.io */
var socket = io.connect('/');

// Send Request
var reqGames = function (data) {
  socket.emit('req_gamesearch', data);
}

$("#txt_search_by_name").keyup(function(event) {
  if (event.which == 13) {
    reqGames({word:$('#txt_search_by_name').val()});
  }
});
$("#btn_search_by_name").click(function() {
  reqGames({word:$('#txt_search_by_name').val()});
});
$('#opt_search_by_genre').change(function() {
  reqGames({
    genre: $("#opt_search_by_genre option:selected").val()
  });
})

// Receive Response
socket.on('res_gamesearch', function (rows) { 
  avList.clearList();

  for (var i=0; i<rows.length; i++) {
    avList.addItem(rows[i]);
  }
});

</script>

</body>
</html>
